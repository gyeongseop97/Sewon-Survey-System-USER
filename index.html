<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sewon Survey System(USER)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">SSS</div>
      <div class="title">
        <div class="h1">Sewon Survey System (user)</div>
        <div class="sub">세원 평가 설문 시스템 (사용자용)</div>
      </div>
    </div>

    <div class="top-actions">
<input id="surveyCodeInput" type="text" placeholder="설문 코드" style="width:140px;" />
<button class="btn ghost" id="btnLoadByCode" type="button">코드로 불러오기</button>
      <label class="btn ghost" style="margin:0;">
        설문 불러오기
        <input type="file" id="fileImportXlsUser" accept=".xls,.xml" hidden />
      </label>
      <button class="btn primary" id="btnExportXlsUser" type="button">설문 내보내기</button>
      <button class="btn" id="btnLogout" type="button">로그아웃</button>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <div class="panel tone-1">
        <div class="field">
          <label>평가 제목</label>
          <input id="surveyTitleUser" type="text" readonly placeholder="설문을 불러오면 제목이 표시됩니다." />
        </div>

        <div class="field">
          <label>회사명</label>
          <input id="targetCompany" type="text" placeholder="예: 세원정공" />
        </div>
        <div class="field">
          <label>이름</label>
          <input id="targetName" type="text" placeholder="예: 홍길동" />
        </div>

        <div class="hint" id="userOverview" style="margin-top:8px;"></div>
      </div>

      <div class="panel tone-2">
        <div class="panel-title">구성 트리</div>
        <div class="tree" id="userTree"></div>
      </div>
    </aside>

    <section class="canvas">
      <section class="view active">
        <div class="canvas-header">
          <div>
            <div class="h2" id="userCanvasTitle">설문을 불러오세요</div>
            <div class="hint" id="userCanvasHint">상단의 “설문 불러오기”에서 관리자 엑셀(.xls)을 선택하세요.</div>
          </div>
        </div>

        <div id="userFormRoot" class="editor"></div>

        <div style="margin-top:12px; display:flex; justify-content:flex-end;">
          <button class="btn" id="btnPrevG2" type="button">이전으로</button>
          <button class="btn" id="btnNextG2" type="button">다음으로</button>
        </div>
      </section>
    </section>
  </main>

  <footer class="footer">
    <div>© Sewon Survey System (local)</div>
    <div class="muted">온오프라인/사내망 운영용</div>
  </footer>
  
<!-- Supabase SDK (user_app.js보다 위에 있어야 함) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

<!-- Auth Modal -->
<div id="authBackdrop" class="auth-backdrop hidden">
  <div class="auth-card">
    <div class="auth-title">로그인</div>
    <div class="auth-sub">이메일과 비밀번호를 입력해 주세요.</div>

    <div class="auth-row">
      <label>이메일</label>
      <input id="authEmail" type="email" placeholder="example@company.com" />
    </div>
    <div class="auth-row">
      <label>비밀번호</label>
      <input id="authPassword" type="password" placeholder="••••••••" />
    </div>

    <div id="authError" class="auth-error"></div>

    <div class="auth-actions">
      <button class="btn ghost" id="btnAuthSignUp" type="button">회원가입</button>
      <button class="btn primary" id="btnAuthLogin" type="button">로그인</button>
    </div>
  </div>
</div>

<script src="user_app.js"></script>
</body>
</html>
